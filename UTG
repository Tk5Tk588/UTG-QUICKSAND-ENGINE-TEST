local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer

local correctPlaceId = 107598099227012

if game.PlaceId ~= correctPlaceId then
    local gui = Instance.new("ScreenGui")
    gui.Name = "WrongGameNotifier"
    gui.ResetOnSpawn = false
    gui.Parent = player:WaitForChild("PlayerGui")

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0.5,0,0.3,0)
    frame.Position = UDim2.new(0.25,0,0.35,0)
    frame.BackgroundColor3 = Color3.fromRGB(40,0,60)
    frame.Parent = gui

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1,-20,0.6,-20)
    label.Position = UDim2.new(0,10,0,10)
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.fromRGB(0,255,255)
    label.Font = Enum.Font.SourceSansBold
    label.TextSize = 22
    label.TextWrapped = true
    label.Text = "Sorry! You are in wrong game.\nPlease click Copy Link or Play Game."
    label.Parent = frame

    local copyBtn = Instance.new("TextButton")
    copyBtn.Size = UDim2.new(0.45,0,0.25,0)
    copyBtn.Position = UDim2.new(0.05,0,0.7,0)
    copyBtn.Text = "Copy Link"
    copyBtn.BackgroundColor3 = Color3.fromRGB(50,0,100)
    copyBtn.TextColor3 = Color3.fromRGB(255,255,255)
    copyBtn.Parent = frame

    local playBtn = Instance.new("TextButton")
    playBtn.Size = UDim2.new(0.45,0,0.25,0)
    playBtn.Position = UDim2.new(0.5,0,0.7,0)
    playBtn.Text = "Play Game"
    playBtn.BackgroundColor3 = Color3.fromRGB(50,0,100)
    playBtn.TextColor3 = Color3.fromRGB(255,255,255)
    playBtn.Parent = frame

    copyBtn.MouseButton1Click:Connect(function()
        if setclipboard then
            setclipboard("https://www.roblox.com/games/"..correctPlaceId)
        end
    end)

    playBtn.MouseButton1Click:Connect(function()
        TeleportService:Teleport(correctPlaceId, player)
    end)
end
local utgGui = Instance.new("ScreenGui")
utgGui.Name = "UTG"
utgGui.ResetOnSpawn = false
utgGui.Parent = player:WaitForChild("PlayerGui")

local utgFrame = Instance.new("Frame")
utgFrame.Size = UDim2.new(0, 260, 0, 300)
utgFrame.Position = UDim2.new(0, 20, 0, 20)
utgFrame.BackgroundColor3 = Color3.fromRGB(40,0,60)
utgFrame.Active = true
utgFrame.Draggable = true
utgFrame.Parent = utgGui

local titleBar = Instance.new("Frame")
titleBar.Size = UDim2.new(1,0,0,30)
titleBar.BackgroundColor3 = Color3.fromRGB(0,120,200)
titleBar.Parent = utgFrame

local titleText = Instance.new("TextLabel")
titleText.Size = UDim2.new(1,-90,1,0)
titleText.Position = UDim2.new(0,5,0,0)
titleText.BackgroundTransparency = 1
titleText.Text = "UTG Quicksand Engine"
titleText.TextColor3 = Color3.fromRGB(0,255,255)
titleText.Font = Enum.Font.SourceSansBold
titleText.TextSize = 18
titleText.TextXAlignment = Enum.TextXAlignment.Left
titleText.Parent = titleBar
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0,25,1,0)
closeBtn.Position = UDim2.new(1,-25,0,0)
closeBtn.Text = "X"
closeBtn.TextColor3 = Color3.fromRGB(255,255,255)
closeBtn.BackgroundColor3 = Color3.fromRGB(200,50,50)
closeBtn.Parent = titleBar

local minBtn = Instance.new("TextButton")
minBtn.Size = UDim2.new(0,25,1,0)
minBtn.Position = UDim2.new(1,-55,0,0)
minBtn.Text = "-"
minBtn.TextColor3 = Color3.fromRGB(0,255,100)
minBtn.BackgroundColor3 = Color3.fromRGB(30,30,30)
minBtn.Parent = titleBar

local maxBtn = Instance.new("TextButton")
maxBtn.Size = UDim2.new(0,25,1,0)
maxBtn.Position = UDim2.new(1,-85,0,0)
maxBtn.Text = "□"
maxBtn.TextColor3 = Color3.fromRGB(0,255,100)
maxBtn.BackgroundColor3 = Color3.fromRGB(30,30,30)
maxBtn.Parent = titleBar
local utgScroll = Instance.new("ScrollingFrame")
utgScroll.Size = UDim2.new(1,-10,1,-40)
utgScroll.Position = UDim2.new(0,5,0,35)
utgScroll.CanvasSize = UDim2.new(0,0,0,0)
utgScroll.ScrollBarThickness = 6
utgScroll.BackgroundTransparency = 1
utgScroll.Parent = utgFrame

local utgLayout = Instance.new("UIListLayout")
utgLayout.Padding = UDim.new(0,8)
utgLayout.FillDirection = Enum.FillDirection.Vertical
utgLayout.Parent = utgScroll

utgLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    utgScroll.CanvasSize = UDim2.new(0,0,0,utgLayout.AbsoluteContentSize.Y+10)
end)

local function makeUTGButton(text)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1,-20,0,40)
    btn.Text = text
    btn.BackgroundColor3 = Color3.fromRGB(50,0,100)
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Parent = utgScroll
    return btn
end

-- Buttons
local WAKEUPBtn = makeUTGButton("WAKE UP(it may get trip in a rooms)")
local IAMRUNNINGSUPERDUPERFASTBtn = makeUTGButton("Toggle I AM RUNNING SUPER DUPER FAST")
local IAMRUNNINGBtn = makeUTGButton("Toggle I AM RUNNING")
local rootBtn = makeUTGButton("Toggle Freeze RootPart")
local charBtn = makeUTGButton("Toggle Freeze Character")
local tallBtn = makeUTGButton("Tall/Tower (sticky required)")
local tripHardBtn = makeUTGButton("Trip Forward (HARD)")
local tripBtn = makeUTGButton("Trip Forward")
local antiSinkBtn = makeUTGButton("Anti-Sinking")
local tpGlue1Btn = makeUTGButton("TP Glue1")
local tpGlue2Btn = makeUTGButton("TP Glue2")
local tpGlue3Btn = makeUTGButton("TP Glue3")
local tpGlue4Btn = makeUTGButton("TP Glue4")
local tpWallGlue1Btn = makeUTGButton("TP WallGlue1")
local tpWallGlue2Btn = makeUTGButton("TP WallGlue2")
local tpClayBtn = makeUTGButton("TP Clay")
local tpLiquidBogBtn = makeUTGButton("TP LiquidBog")
local tpMudBtn = makeUTGButton("TP Mud")
local tpQuicksandBtn = makeUTGButton("TP Quicksand")
local tpSlimeBtn = makeUTGButton("TP Slime")
local tpTarBtn = makeUTGButton("TP Tar")
local tpOobleckBtn = makeUTGButton("TP Oobleck")
-- Helper: teleport function
local function tpTo(pos)
    local char = player.Character or player.CharacterAdded:Wait()
    local root = char:FindFirstChild("HumanoidRootPart")
    if root then root.CFrame = CFrame.new(pos) end
end

WAKEUPBtn.MouseButton1Click:Connect(function()
    local char = player.Character or player.CharacterAdded:Wait()
    local humanoid = char:FindFirstChildOfClass("Humanoid")
    local root = char:FindFirstChild("HumanoidRootPart")
    if humanoid and root then
        humanoid:ChangeState(Enum.HumanoidStateType.GettingUp)
    end
end)

-- Root Freeze
local rootFrozen = false
rootBtn.MouseButton1Click:Connect(function()
    local char = player.Character or player.CharacterAdded:Wait()
    local root = char:FindFirstChild("HumanoidRootPart")
    if root then
        rootFrozen = not rootFrozen
        root.Anchored = rootFrozen
        rootBtn.Text = rootFrozen and "Frozen RootPart" or "Toggle Freeze RootPart"
    end
end)

local IAMRUNNINGTOGGLE = false
IAMRUNNINGBtn.MouseButton1Click:Connect(function()
    local char = player.Character or player.CharacterAdded:Wait()
    local root = char:FindFirstChild("HumanoidRootPart")
    if root then
        IAMRUNNINGTOGGLE = not IAMRUNNINGTOGGLE
        root.Anchored = IAMRUNNINGTOGGLE
        IAMRUNNINGBtn.Text = IAMRUNNINGTOGGLE and "STARTED IAMRUNNING" or "Toggle I AM RUNNING"
        root.Velocity = root.CFrame.LookVector * 100 + Vector3.new(0, 0, -10)
    end
end)

local IAMRUNNINGSUPERDUPERFASTTOGGLE = false
IAMRUNNINGSUPERDUPERFASTBtn.MouseButton1Click:Connect(function()
    local char = player.Character or player.CharacterAdded:Wait()
    local root = char:FindFirstChild("HumanoidRootPart")
    if root then
        IAMRUNNINGSUPERDUPERFASTTOGGLE = not IAMRUNNINGSUPERDUPERFASTTOGGLE
        root.Anchored = IAMRUNNINGSUPERDUPERFASTTOGGLE
        IAMRUNNINGSUPERDUPERFASTBtn.Text = IAMRUNNINGSUPERDUPERFASTTOGGLE and "STARTED IAMRUNNING SUPER DUPER FAST" or "Toggle I AM RUNNING SUPER DUPER FAST"
        root.Velocity = root.CFrame.LookVector * 1000 + Vector3.new(0, 0, -10)
    end
end)

-- Character Freeze
local charFrozen = false
charBtn.MouseButton1Click:Connect(function()
    local char = player.Character or player.CharacterAdded:Wait()
    charFrozen = not charFrozen
    for _, part in ipairs(char:GetDescendants()) do
        if part:IsA("BasePart") then
            part.Anchored = charFrozen
        end
    end
    charBtn.Text = charFrozen and "Frozen Character" or "Toggle Freeze Character"
end)

-- Tall/Tower teleport
tallBtn.MouseButton1Click:Connect(function()
    local char = player.Character or player.CharacterAdded:Wait()
    local root = char:FindFirstChild("HumanoidRootPart")
    if root then
        root.CFrame = CFrame.new(root.Position.X, 1000, root.Position.Z)
    end
end)

tripHardBtn.MouseButton1Click:Connect(function()
    local char = player.Character or player.CharacterAdded:Wait()
    local humanoid = char:FindFirstChildOfClass("Humanoid")
    local root = char:FindFirstChild("HumanoidRootPart")

    if humanoid and root then
        -- put humanoid into ragdoll physics
        humanoid:ChangeState(Enum.HumanoidStateType.Physics)

        -- add forward velocity so it looks like a trip, not just a tilt. but HARD
        root.Velocity = root.CFrame.LookVector * 100 + Vector3.new(0, 0, -10)

        -- wait a bit, then recover
        task.wait(4.25)
        humanoid:ChangeState(Enum.HumanoidStateType.GettingUp)
    end
end)

tripBtn.MouseButton1Click:Connect(function()
    local char = player.Character or player.CharacterAdded:Wait()
    local humanoid = char:FindFirstChildOfClass("Humanoid")
    local root = char:FindFirstChild("HumanoidRootPart")

    if humanoid and root then
        -- put humanoid into ragdoll physics
        humanoid:ChangeState(Enum.HumanoidStateType.Physics)

        -- add forward velocity so it looks like a trip, not just a tilt
        root.Velocity = root.CFrame.LookVector * 50 + Vector3.new(0, -10, 0)

        -- rotate forward at -90 degrees (fall forward)
        root.CFrame = root.CFrame * CFrame.Angles(math.rad(-90), 0, 0)

        -- wait a bit, then recover
        task.wait(4.25)
        humanoid:ChangeState(Enum.HumanoidStateType.GettingUp)
    end
end)


-- Anti-Sinking
local antiSinkOn = false
local antiLoop = nil
antiSinkBtn.MouseButton1Click:Connect(function()
    antiSinkOn = not antiSinkOn
    if antiSinkOn then
        antiSinkBtn.Text = "Anti-Sinking ON"
        antiLoop = task.spawn(function()
            while antiSinkOn do
                for _, part in ipairs(workspace:GetDescendants()) do
                    if part:IsA("BasePart") then
                        for _, sinkName in ipairs({
                            "Glue","WallGlue","Clay","LiquidBog",
                            "Mud","Quicksand","Slime","Tar","Oobleck"
                        }) do
                            if part.Name == sinkName then
                                part.Anchored = true
                                part.CanCollide = true
                            end
                        end
                    end
                end
                task.wait(0.5)
            end
        end)
    else
        antiSinkBtn.Text = "Anti-Sinking"
        if antiLoop then
            task.cancel(antiLoop)
            antiLoop = nil
        end
        for _, part in ipairs(workspace:GetDescendants()) do
            if part:IsA("BasePart") then
                for _, sinkName in ipairs({
                    "Glue","WallGlue","Clay","LiquidBog",
                    "Mud","Quicksand","Slime","Tar","Oobleck"
                }) do
                    if part.Name == sinkName then
                        part.Anchored = true
                        part.CanCollide = false
                    end
                end
            end
        end
    end
end)

-- Teleports (update coordinates as needed)
tpGlue1Btn.MouseButton1Click:Connect(function() tpTo(Vector3.new(163,246,-30)) end)
tpGlue2Btn.MouseButton1Click:Connect(function() tpTo(Vector3.new(164,246,-5)) end)
tpGlue3Btn.MouseButton1Click:Connect(function() tpTo(Vector3.new(164,246,-5)) end)
tpGlue4Btn.MouseButton1Click:Connect(function() tpTo(Vector3.new(168,246,-40)) end)
tpWallGlue1Btn.MouseButton1Click:Connect(function() tpTo(Vector3.new(168,246,-36)) end)
tpWallGlue2Btn.MouseButton1Click:Connect(function() tpTo(Vector3.new(168,246,-36)) end)
tpClayBtn.MouseButton1Click:Connect(function() tpTo(Vector3.new(-37,273,247)) end)
tpLiquidBogBtn.MouseButton1Click:Connect(function() tpTo(Vector3.new(34,19,-7)) end)

-- Mud with warning ⚠️
tpMudBtn.MouseButton1Click:Connect(function()
    tpTo(Vector3.new(39,259,18))
    local gui = Instance.new("ScreenGui")
    gui.Name = "GrassWarning"
    gui.ResetOnSpawn = false
    gui.Parent = player:WaitForChild("PlayerGui")

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0.4,0,0.15,0)
    frame.Position = UDim2.new(0.3,0,0.8,0)
    frame.BackgroundColor3 = Color3.fromRGB(0,150,0)
    frame.Parent = gui

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1,0,1,0)
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.fromRGB(255,255,255)
    label.Font = Enum.Font.SourceSansBold
    label.TextSize = 24
    label.Text = "⚠️ Touching Grass Detected!"
    label.Parent = frame

    local sound = Instance.new("Sound")
    sound.SoundId = "rbxassetid://130762736"
    sound.Volume = 1
    sound.Parent = frame
    sound:Play()

    task.delay(3,function() gui:Destroy() end)
end)

tpQuicksandBtn.MouseButton1Click:Connect(function() tpTo(Vector3.new(25,293,-90)) end)
tpSlimeBtn.MouseButton1Click:Connect(function() tpTo(Vector3.new(113,260,132)) end)
tpTarBtn.MouseButton1Click:Connect(function() tpTo(Vector3.new(72,303,-185)) end)
tpOobleckBtn.MouseButton1Click:Connect(function() tpTo(Vector3.new(8,19,22)) end)
-- Close Button
closeBtn.MouseButton1Click:Connect(function()
    utgGui.Enabled = false
end)

-- Minimize Button
local minimized = false
minBtn.MouseButton1Click:Connect(function()
    minimized = not minimized
    utgScroll.Visible = not minimized
end)

-- Maximize Button
local maximized = false
maxBtn.MouseButton1Click:Connect(function()
    maximized = not maximized
    if maximized then
        utgFrame.Size = UDim2.new(0,500,0,400)
    else
        utgFrame.Size = UDim2.new(0,260,0,300)
    end
end)

-- Hide Toggle with H Key
local hidden = false
UserInputService.InputBegan:Connect(function(input, gp)
    if not gp and input.KeyCode == Enum.KeyCode.H then
        hidden = not hidden
        utgFrame.Visible = not hidden
    end
end)
print("UTG Quicksand Engine loaded successfully. (Trip + WallGlue1–2 version)")
